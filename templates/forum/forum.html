{% extends 'baseNav.html' %}
    {% block title %}VerdexTalks{% endblock %}
{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='forum.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="/assets/forumJS"></script>
{% endblock %}

{% block body %}
    <div class="content">
        <div class="list-of-all-filter-buttons-container">
            <ul class="list-of-all-filter-buttons">
                <li class="filter-buttons" onclick="filterPosts('All')">All</li>
                <li class="filter-buttons" onclick="filterPosts('Scenery')">#Scenery</li>
                <li class="filter-buttons" onclick="filterPosts('Island Hopping')">#Island Hopping</li>
                <li class="filter-buttons" onclick="filterPosts('Food')">#Food</li>
            </ul>
        </div>
        <div class="create-a-post-container">
            <button class="create-a-post-button" onclick="createPostPopup()">Create A Post!</button><br>
            <p class="or-separator">-----------------OR-----------------</p>
            <p class="recent-itineraries-para">Recent itineraries:</p><br>
            <button class="recent-itineraries-buttons" onclick="itineraryShortcutButtonPopup('Trip to Sentosa')">Trip to Sentosa</button><br>
            <button class="recent-itineraries-buttons" onclick="itineraryShortcutButtonPopup('Singapore Islands')">Singapore Islands</button><br>
            <button class="recent-itineraries-buttons" onclick="itineraryShortcutButtonPopup('Food Galore')">Food Galore</button><br>
        </div>
        <div class="post-section-container">
            {% for post_username, post_data in postsInfoJson.items() %}
                <div class="individual-posts" data-post-id="{{ post_data.postDateTimeId }}" id="{{ post_data.tag }}">
                    <div class="post-content">
                        <div class="nameAndTagHeader">
                            <h3 class="name-of-user-who-shared-post-header">{{ post_data.user_names }} shared: <span id="postTitle"><i>{{ post_data.post_title }}</i></span></h3>
                            {% if post_data.tag != "" %}
                                <h4 class="tag-display">#{{ post_data.tag }}</h4>
                            {% endif %}
                        </div>
                        {% for post_id, post_data in postsInfoJson.items() %}
                        <!-- <button class="edit-button" onclick="editPost('{{ post_id }}')">Edit</button> -->
                        <p class="post-description">{{ post_data.post_description }}</p>
                        <h5 id="comments-header">Comments: </h5><br>
                            {% for comment_id, comment_text in post_data.comments.items() %}
                                <div class="commentDiv" data-comment-id="{{ comment_id }}">
                                    <li id="comment">{{ comment_text }}</li>
                                    <button id="delete-comment-button" onclick="deleteComment('{{ post_id }}', '{{ comment_id }}')">Delete comment</button>
                                </div>
                            {% endfor %}
                        {% endfor %}
                    </div>
                    <div class="post-reaction-buttons-container">
                        <ul class="list-of-reaction-buttons">
                            <li class="reaction-buttons" onclick='likePost("{{ post_data.postDateTimeId }}")'>Likes ({{ post_data.likes }})</li>
                            <li class="reaction-buttons" onclick='deletePost("{{ post_data.postDateTimeId }}")'>Delete post</li>
                            <li class="reaction-buttons" onclick='commentPost("{{ post_data.postDateTimeId }}")'>Comment</li>
                        </ul>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div id="create-a-post-popup">
            <div id="popup-content">
                <form id="create-post-form" method="post" action="{{ url_for('forum.verdextalks') }}">
                    <button id="close-popup-button" onclick="return closeCreatePopup()"><span>&#x274C;</span> Discard changes</button>
                    <h2 id="popup-header">Create A Post!</h2>
                    <textarea name="user_names" id="user_names" rows="1" cols="80" placeholder="Name(s): " required="required"></textarea><br>
                    <textarea name="post_title" id="post-title" rows="1" cols="120" placeholder="Title: " required="required"></textarea><br>
                    <textarea name="post_description" id="post-description" rows="8" cols="100" placeholder="Write your post description here" required="required"></textarea><br>
                    <input type="hidden" name="post_tag" id="post-tag" value="">
                    <p>Suggested tags: (Optional)</p>
                    <div id="tags-button-container">
                        <button id="scenery-tag-button" class="tags-button" onclick="selectTag('Scenery', event, 'scenery-tag-button', 'food-tag-button', 'islandhopping-tag-button')">#Scenery</button>
                        <button id="food-tag-button" class="tags-button" onclick="selectTag('Food', event, 'food-tag-button', 'scenery-tag-button', 'islandhopping-tag-button')">#Food</button>
                        <button id="islandhopping-tag-button" class="tags-button" onclick="selectTag('Island Hopping', event, 'islandhopping-tag-button', 'scenery-tag-button', 'food-tag-button')">#Island Hopping</button>
                    </div>
                    <button type="submit" name="addNewPost" id="post-it-button" onclick="submitPost()">Post it!</button>
                </form>
            </div>
        </div>
        <div id="comment-on-post-popup">
            <div id="popup-content">
                <form id="comment-post-form" method="post" action="{{ url_for('forum.comment_on_post') }}">
                    <button id="close-popup-button" onclick="return closeCommentPopup()"><span>&#x274C;</span> Discard changes</button>
                    <h2 id="popup-header">Add your comment!</h2>
                    <textarea name="comment_description" id="comment_description" rows="8" cols="100" placeholder="Write your comment here" required="required"></textarea><br>
                    <button type="button" name="commentOnPost" id="comment-button" onclick='submitComment()'>Add comment!</button>
                </form>
            </div>
        </div>
        <!-- <div id="edit-post-popup">
            <div id="popup-content">
                <form id="edit-post-form" method="post" action="{{ url_for('forum.verdextalks') }}">
                    <button id="close-popup-button" onclick="return closeEditPopup()"><span>&#x274C;</span> Discard changes</button>
                    <h2 id="popup-header">Edit post</h2>
                    <textarea name="edit_user_names" id="user_names" rows="1" cols="80" required="required" placeholder="New name(s): "></textarea><br>
                    <textarea name="edit_post_title" id="post-title" rows="1" cols="120" required="required" placeholder="New title: "></textarea><br>
                    <textarea name="edit_post_description" id="post-description" rows="8" cols="100" required="required" placeholder="New description: "></textarea><br>
                    <input type="hidden" name="edit_post_id" id="edit-post-id" value="">
                    <p>Suggested tags: </p>
                    <div id="tags-button-container">
                        <button id="tags-button">#Scenery</button>
                        <button id="tags-button">#Food</button>
                        <button id="tags-button">#Island Hopping</button>
                    </div>
                    <button type="submit" name="editPost" id="post-it-button" onclick="submitEdit()">Confirm edits</button>
                </form>
            </div>
        </div> -->
    </div>
{% endblock %}